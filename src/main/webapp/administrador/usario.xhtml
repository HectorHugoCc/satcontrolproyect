<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"> 

<ui:composition template="/WEB-INF/templates/uiConMenu.xhtml">

		<ui:define name="pageTitle">Usuario</ui:define>
		
		<ui:define name="pageHeader"></ui:define>
		<ui:define name="body">
		
		
		<h:form id="listaUsuario">
		
		<p:growl id="msgs" showDetail="true" ></p:growl>
		
			<h:inputHidden value="#{usuarioBean.usuarioSeleccionado.id}" />
		
			<p:fieldset legend="Usuarios">
				<h:panelGrid columns="6">
				
		
			<p:dataTable id="usuariodt" var="usuario" value="#{usuarioBean.listaUsuario}" selectionMode="single" rowKey="#{usuario.id}" editable="true" style="margin-bottom:20px"
			paginator="true" rows="5" paginatorTemplate="	{FirstPageLink}
					{LastPageLink}
					{PreviousPageLink}
					{NextPageLink}
					{PageLinks}
					{CurrentPageReport}
					{RowsPerPageDropdown} "
					scrollable="true" rowsPerPageTemplate="1, 3, 5"
					currentPageReportTemplate="PÃ¡gina: ({currentPage}/{totalPages})">
				
				<f:facet name="header">Lista Usuario</f:facet>
				
				<p:ajax event="rowEdit" listener="#{usuarioBean.onRowEdit}" update=":listaUsuario:msgs" />
     			<p:ajax event="rowEditCancel" listener="#{usuarioBean.onRowCancel}" update=":listaUsuario:msgs" />
 
				<p:column headerText="Id">
				<p:cellEditor>
					<f:facet name="output"><h:outputText value="#{usuario.id}"/></f:facet>
					<f:facet name="input"><p:inputText id="modelInput" value="#{usuario.id}" style="width:100%"></p:inputText></f:facet>
				</p:cellEditor>
				</p:column>
				
				<p:column headerText="Codigo">
				<p:cellEditor>
					<f:facet name="output"><h:outputText value="#{usuario.codigo}" /></f:facet>
					<f:facet name="input"><p:inputText value="#{usuario.codigo}" style="width:100%" label="Codigo"></p:inputText></f:facet>
				</p:cellEditor>
				</p:column>
				
				<p:column headerText="Nombre">
				<p:cellEditor>
					<f:facet name="output"><h:outputText value="#{usuario.nombre}" /></f:facet>
					<f:facet name="input"><p:inputText value="#{usuario.nombre}" style="width:100%" label="Nombre"></p:inputText> </f:facet>
				</p:cellEditor>
				</p:column>
				
				<p:column headerText="Palabra Clave">
				<p:cellEditor>
					<f:facet name="output"><h:outputText value="#{usuario.clave}" /></f:facet>
					<f:facet name="input"><p:inputText value="#{usuario.clave}" style="width:100%" label="Palabra Clave"></p:inputText> </f:facet>
				</p:cellEditor>
				</p:column>
				
				<p:column headerText="Correo">
				<p:cellEditor>
					<f:facet name="output"><h:outputText value="#{usuario.correo}" /></f:facet>
					<f:facet name="input"><p:inputText value="#{usuario.correo}" style="width:100%" label="Correo"></p:inputText> </f:facet>
				</p:cellEditor>
				</p:column>
				
			
		<!--  <p:column headerText="Area Funcional" width="60">
				<p:cellEditor>
					<f:facet name="output"><h:outputText value="#{usuario.areaFuncional.descripcionCorta}"/></f:facet>
					<f:facet name="input">
					<p:selectOneMenu value="#{usuarioBean.listaAreaFuncional}" var="fila" style="width:100%">
						<f:selectItem  itemLabel="#{fila.descripcion}" itemValue="#{fila.id}"/>
						
					</p:selectOneMenu>
					</f:facet>
				</p:cellEditor>
				</p:column>
				-->	
				<p:column headerText="Area Funcional" width="60">
					<h:outputLabel value="#{usuario.areaFuncional.id}" />
				</p:column>
				
				<p:column headerText="Estado" width="60">
				<p:cellEditor>
					<f:facet name="output"><h:outputText value="#{usuario.estado==1?'Habilitado':'Deshabilitado'}"/></f:facet>
					<f:facet name="input">
					<p:selectOneMenu value="#{usuario.estado}" style="width:100%">
						<f:selectItem  itemLabel="Habilitado" itemValue="1"/>
						<f:selectItem itemLabel="Deshabilitado" itemValue="0"/>
						
					</p:selectOneMenu>
					</f:facet>
				</p:cellEditor>
				</p:column>
				
				
				<p:column style="width:100px">
				<f:facet name="header">Acciones</f:facet>
		           <p:rowEditor />
		           
		       </p:column>
			
				
			</p:dataTable>
			
			
			
			
			</h:panelGrid>
			
			<p:commandButton type="button" value="CrearUsu" id="crearBtn" onclick="PF('usuario_create').show()"></p:commandButton>
			
			</p:fieldset>
			
		</h:form>
		
		
		<p:dialog closeOnEscape="true" widgetVar="usuario_create"
		showEffect="blind" hideEffect="bounce" width="800" footer="Crear Usuario">
		<h:form id="crearUsuario">
			
			<h:inputHidden value="#{usuarioBean.usuarioSeleccionado.id}" />
			
			<p:fieldset legend="Crear Usuario">
			<h:panelGrid columns="3">
			
			<f:facet name="header">Crear Usuario</f:facet>
				
				<p:outputLabel value="Codigo" for="text_cod"/>
						<p:inputText id="text_cod"
						value="#{usuarioBean.usuarioSeleccionado.codigo}"
						style="width: 200px;" required="true"
						requiredMessage="Completar Codigo"/>
				<p:message for="text_cod"/>
				
				<p:outputLabel value="Nombre" for="text_nom"/>
						<p:inputText id="text_nom"
						value="#{usuarioBean.usuarioSeleccionado.nombre}"
						style="width: 200px;" required="true"
						requiredMessage="Completar Nombre"/>
				<p:message for="text_nom"/>
				
				<p:outputLabel value="Clave" for="text_cla"/>
						<p:inputText id="text_cla"
						value="#{usuarioBean.usuarioSeleccionado.clave}"
						style="width: 200px;" required="true"
						requiredMessage="Completar Clave"/>
				<p:message for="text_cla"/>
			
			<p:outputLabel value="Correo" for="text_cor"/>
						<p:inputText id="text_cor"
						value="#{usuarioBean.usuarioSeleccionado.correo}"
						style="width: 200px;" required="true"
						requiredMessage="Completar Correo"/>
				<p:message for="text_cor"/>
				
			<p:outputLabel value="Area Funcional"/>
			<p:selectOneMenu value="#{usuarioBean.usuarioSeleccionado.areaFuncional.id}" 
							required="true" requiredMessage="Completar gerencia central">
						
						<f:selectItem itemLabel="[Seleccione]" itemValue=" "/>
								<f:selectItems value="#{usuarioBean.listaAreaFuncional}" var="fila"
									itemLabel="#{fila.descripcionCorta}" 
									itemValue="#{fila.id}"/>	
							
			</p:selectOneMenu>
					
				
		<!-- 	<p:outputLabel value="Gerencia" for="text_ger"/>
						<p:inputText id="text_ger"
						value="#{usuarioBean.usuarioSeleccionado.areaFuncional.gerencia.id}"
						style="width: 200px;" required="true"
						requiredMessage="Completar gerencia"/>
				<p:message for="text_des"/>	
				
			<p:outputLabel value="Area Funcional" for="text_arefun"/>
						<p:inputText id="text_arefun"
						value="#{usuarioBean.usuarioSeleccionado.areaFuncional.id}"
						style="width: 200px;" required="true"
						requiredMessage="Completar Area Funcional"/>
				<p:message for="text_des"/>
				
			<p:outputLabel value="Perfil" for="text_per"/>
						<p:inputText id="text_per"
						value="#{usuarioBean.usuarioSeleccionado.perfil.id}"
						style="width: 200px;" required="true"
						requiredMessage="Completar gerencia central"/>
				<p:message for="text_des"/>
			 -->
			</h:panelGrid>
			</p:fieldset>
			</h:form>
			</p:dialog>
		
		
		</ui:define>
</ui:composition>
</html>
